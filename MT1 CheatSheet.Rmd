---
title: "Midterm 1 CheatSheet"
output: html_document
date: "2024-02-06"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#from 5_2
```{r}
fish %>% #work with fish
  select(lakeid,radii_length_mm) %>% #pull out variables of interest
  filter(lakeid == "AL"| lakeid == "AR") %>% #only those lakes
  filter(between(radii_length_mm, 2,4)) %>% #between lengths 2 and 4
  arrange(desc(radii_length_mm)) #sort in descending order
```

```{r}
fish %>% 
  mutate(length_mm = length*10) %>% 
  select(fish_id, length, length_mm)
```
#tolower
Using the across function we can specify individual columns.
```{r}
mammals %>% 
  mutate(across(c("order", "family"), tolower))
```

Here is an example that changes all entries to lowercase (if present).  
```{r}
mammals %>%
  mutate_all(tolower)
```
#from 6_1
## `if_else()`
We will briefly introduce `if_else()` here because it allows us to use `mutate()` but not have the entire column affected in the same way. In a sense, this can function like find and replace in a spreadsheet program. With `ifelse()`, you first specify a logical statement, afterwards what needs to happen if the statement returns `TRUE`, and lastly what needs to happen if it's  `FALSE`.  
Have a look at the data from mammals below. Notice that the values for newborn include `-999.00`. This is sometimes used as a placeholder for NA (but, is a really bad idea). We can use `if_else()` to replace `-999.00` with `NA`.
#basically this wont work beacuse gonna include -999 as value
```{r}
mammals %>% 
  select(genus, species, newborn) %>% 
  arrange(newborn)
```
#SO
```{r}
mammals %>% 
  select(genus, species, newborn) %>%
  mutate(newborn_new = ifelse(newborn == -999.00, NA, newborn))%>% #new variable, if -999, replace with NA. If it is not -999, keep original value
  arrange(newborn)
```
#more
1. We are interested in the family, genus, species and max life variables. Because the max life span for several mammals is unknown, the authors have use -999 in place of NA. Replace all of these values with NA in a new column titled `max_life_new`. Finally, sort the date in descending order by max_life_new. Which mammal has the oldest known life span?
```{r}
mammals %>% 
  select(family,genus,species,max_life) %>% 
  mutate(max_life_new = ifelse(max_life == -999.0,NA, max_life)) %>% 
  arrange(desc(max_life))
```

#from 7_2
This is very helpful for continuous variables.
```{r}
penguins %>%
  summarize(across(contains("mm"), mean, na.rm=T))
```

All variables that include "bill"...all of the other dplyr operators also work.
```{r}
penguins %>%
  summarise(across(starts_with("bill"), mean, na.rm=T))
```